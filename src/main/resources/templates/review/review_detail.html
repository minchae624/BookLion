<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="UTF-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<title>책 먹는 사자 - 감상평 상세</title>
	<link rel="stylesheet" href="/css/style.css" />
</head>

<body>
	<header class="home-header">
		<a th:href="@{/api/home}">
			<img th:src="@{/img/linklogo.png}" alt="홈으로" class="linklogo">
		</a>
		<div class="home-user-info">
			<span id="welcome-msg">환영합니다.</span>
			<!-- 유저 정보 -->
			<input type="hidden" id="user-name"/>
			<input type="hidden" id="user-id"/>
			<input type="hidden" id="post-writer" th:value="${posts.user.userId}">
			<div class="home-nav-buttons">
				<button id="logout-btn" class="btn btn-secondary">로그아웃</button>
				<button id="mypage-btn" class="btn btn-secondary">마이페이지</button>
			</div>
		</div>
	</header>
	<main class="review-detail-container">
		<h3 th:text="|제목: ${posts.title}|"></h3>
		<div style="margin: 1rem 0;">
			<p>
				<strong th:text="|[책제목] ${posts.booktitle}|">[책제목]</strong> | &nbsp;
				<strong th:text="|[작가] ${posts.author}|">[작가]</strong> &nbsp; | &nbsp;
				<strong th:text="|[장르] ${posts.genre}|">[장르]</strong> &nbsp; | &nbsp;
				<strong th:text="|[글쓴이] ${posts.user.username}|">[글쓴이]</strong> &nbsp; | &nbsp;
				<strong th:text="|[작성일] ${#temporals.format(posts.writingtime,'yyyy-MM-dd')}|">[작성일]</strong>
				<strong th:text="|[별점] ${posts.rating}|">[별점]</strong>&nbsp;
				<strong th:text="|조회수 ${posts.viewCount}|">[조회수]</strong>&nbsp;
			</p>
		</div>
		<div style="padding: 1rem; background-color: #eee; border-radius: 6px; margin-bottom: 1rem; line-height: 1.6;">
			<p th:text="${posts.content}"></p>
		</div>
		<div style="text-align: center; margin: 2rem 0;">
			<button id = "like-btn" class="btn btn-red">좋아요</button>
			<p id ="like-count" style="margin-top: 0.5rem;" th:text="${#lists.size(posts.likes)}"></p>
		</div>
		<p style="text-align: right; font-size: 0.9rem;" id="edit-delete-btn">
			<a th:href="@{/api/posts/update/{id}(id=${posts.postId})}" style="margin-right: 1rem;">수정</a>
			<a href="#" th:onclick="'deletePost(' + ${posts.postId} + ')'" style="color: red;">삭제</a>
		</p>
		<hr style="margin: 2rem 0;" />
		<!-- 댓글 리스트 -->
		<div id="reply-list" style="margin-top: 2rem;">
		    <!-- JS가 댓글 목록을 여기 동적으로 삽입 -->
		</div>
		<div style="margin-top: 2rem;">
		    <label for="new-comment"><strong>댓글 작성</strong></label>
		    <textarea id="new-comment" rows="5" class="input-field" placeholder="댓글을 입력하세요."></textarea>
		    <div style="text-align: right; margin-top: 0.5rem;">
		        <button id="btn-submit-reply" class="btn btn-blue">등록</button>
		    </div>
		</div>
		<div id="reply-list" style="margin-top: 2rem;"></div>
	</main>
	<script src="/js/review.js"></script>
</body>

</html>